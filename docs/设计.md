# 摄影素材工作流

## 原始素材预处理

### 照片文件重命名

对于原始照片，我会将素材拷贝到本地的 `Photograph-local` 目录下，并按照日期（例如 250101）和相册名称进行重命名，这样可以方便后续的管理和查找。

文件结构如下：

```bash
./cache/Photograph-local
└── YYMMDD-相册名称
    ├── DSC08656.ARW
    ├── DSC08657.ARW
    └── ...
```

这些照片需要根据 `YYMMDD-相册名称` 进行重命名，但是这些原始素材可以读取出拍摄日期和时间，因此我会使用 python 并借助 `exiftool` 库来读取 exif 数据，并将文件重命名为 `YYMMDD-相册名称-时间.ARW` 的格式。

例如 `DSC08656.ARW` 可以读取到拍摄日期和时间，然后重命名为 `YYMMDD-相册名称-时间.ARW` 的格式。

这是索尼的格式，你可以从 exif 数据中获取到厂商和型号信息。

我需要定义一个专用于重命名索尼 RAW 文件的类

```python
class BaseTask(ABC):
    """任务基类"""

    @abstractmethod
    def generate(self) -> None:
        """生成任务方法，子类需要实现此方法"""
        raise NotImplementedError("Subclasses must implement this method")

    @abstractmethod
    def description(self) -> str:
        """返回任务描述、，模拟执行时使用"""
        raise NotImplementedError("Subclasses must implement this method")

    @abstractmethod
    def execute(self, dry_run: bool = True) -> None:
        """
        执行当前任务
        :param dry_run: 是否为模拟执行
        """
        raise NotImplementedError("Subclasses must implement this method")


class TaskManager:
    """任务管理器，用于注册和管理处理器任务"""

    task_list: typing.List[BaseTask]
    """任务列表，存储所有注册的处理器"""

    def __init__(self):
        self.task_list = []


class RenameSonyRawPhotoTask(BaseTask):
    """索尼相机原始照片任务，用于处理单个 .ARW 文件及其对应的 .XMP 文件"""

    file_path: Path
    """文件路径"""

    album_name: str
    """相册名称"""
```

### 视频文件重命名
